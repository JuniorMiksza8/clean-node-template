{"info":{"_postman_id":"6fd5a2ef-93ca-4bc7-bdba-a13f6cc066c6","name":"auth-api","description":"Authorization API to access the whole mypharma ecosystem","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"StoreSession","item":[{"name":"startup","event":[{"listen":"prerequest","script":{"id":"d8b18ea5-e022-4e48-88ff-37a244170888","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"29c5dc48-ff51-4fbb-82bb-d80c50aa1cbf","exec":["const { accessToken } = JSON.parse(responseBody)","pm.environment.set('authorization',accessToken)"],"type":"text/javascript"}}],"id":"31821053-9b5b-4135-bfbf-dab727bdc13d","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"origin","value":"https://alpha-ecommerce.mypharma.com.br/","type":"text","disabled":true}],"url":{"raw":"{{API_AUTH_URL}}/v1/store/startup","host":["{{API_AUTH_URL}}"],"path":["v1","store","startup"]}},"response":[]}],"id":"9c895d96-0968-4ed8-912f-1843fc1be8f3"},{"name":"customer","item":[{"name":"New Request","event":[{"listen":"test","script":{"id":"0d99cd9b-540e-4ef8-8991-53dc3c873c3a","exec":["const { accessToken } = JSON.parse(responseBody)","pm.environment.set('authorization',accessToken)"],"type":"text/javascript"}}],"id":"e3937c88-8577-4759-9329-5a711ab3a68f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"raw","raw":"{\n    \"email\" : \"junior.miksza8@gmail.com\",\n    \"password\" : \"Junior@07102001\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{API_URL}}/v1/customer/session","host":["{{API_URL}}"],"path":["v1","customer","session"]}},"response":[]}],"id":"7ee9b927-7ef1-4fbd-aaf3-d016e83be9f5"},{"name":"Session","item":[{"name":"New Request","event":[{"listen":"test","script":{"id":"33a32256-6449-40a1-81cb-e40aa6943b83","exec":["const { role = 'store' } = JSON.parse(pm.request.body)","","if (role === 'store') {","    const { accessToken } = JSON.parse(responseBody)","    pm.environment.set('adminAuthorization', accessToken)","}","","if (role === 'admin') {","    const { accessToken } = JSON.parse(responseBody)","    pm.environment.set('backofficeAuthorization', accessToken)","}"],"type":"text/javascript"}}],"id":"acb4a27d-72a5-485e-bb93-2b1d5e297584","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[],"body":{"mode":"raw","raw":"{\n    \"userName\" : \"alpha\",\n    \"password\" : \"12345\",\n    \"role\" : \"store\"\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{API_URL}}/v1/sessions","host":["{{API_URL}}"],"path":["v1","sessions"]}},"response":[]}],"id":"8a4ba438-ef99-45a9-a1a4-589a9c86fc1b"},{"name":"UserTenants","item":[{"name":"New Request","id":"812b2263-f6fb-4451-b853-6f2240e13403","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"bearer","bearer":[{"key":"token","value":"{{adminAuthorization}}","type":"string"}]},"method":"GET","header":[],"url":{"raw":"{{API_URL}}/v1/userTenants","host":["{{API_URL}}"],"path":["v1","userTenants"]}},"response":[]}],"id":"e0f40a68-284f-4ffb-8b4c-734e0a48b4a5"},{"name":"UserSetTenant","item":[{"name":"New Request","event":[{"listen":"test","script":{"id":"cd75f996-9633-465a-bf59-30aef20ad654","exec":["const { accessToken } = JSON.parse(responseBody)","pm.environment.set('adminAuthorization',accessToken)"],"type":"text/javascript"}}],"id":"d9fb04bc-5e6e-4712-9e76-780fddbdeb50","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[],"url":{"raw":"{{API_URL}}/v1/userSetTenants/{{STORE_ID}}","host":["{{API_URL}}"],"path":["v1","userSetTenants","{{STORE_ID}}"]}},"response":[]}],"id":"db92c0cd-b265-443f-a96e-b22333879d17","auth":{"type":"bearer","bearer":[{"key":"token","value":"{{adminAuthorization}}","type":"string"}]},"event":[{"listen":"prerequest","script":{"id":"3f1aa7e4-ca7c-411b-a651-29bc564ff759","type":"text/javascript","exec":[""]}},{"listen":"test","script":{"id":"759da12a-0721-4dd9-8b15-672d22d0557b","type":"text/javascript","exec":[""]}}]}],"event":[{"listen":"prerequest","script":{"id":"035db8a8-cfa3-4618-baf5-8c794b07da09","type":"text/javascript","exec":["var Header = require('postman-collection').Header","","const value = pm.environment.get('x-origin')","pm.request.addHeader(new Header({ key: 'x-origin', value }))"]}},{"listen":"test","script":{"id":"ab47136a-0176-4d3c-be4a-418e593196d7","type":"text/javascript","exec":[""]}}],"variable":[{"id":"45967bfd-c7b0-4433-a4fb-d45481e15d25","key":"API_URL","value":"http://localhost:8081"},{"id":"7d86720b-5752-4fb9-84fe-d499ee9f221c","key":"TENANT_ID","value":""}]}